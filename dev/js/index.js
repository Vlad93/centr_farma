"use strict";

document.addEventListener('DOMContentLoaded', function () {
  document.querySelectorAll('[popupOpen]').forEach(function (e) {
    e.addEventListener('click', function (e) {
      popupClose();
      var target = e.target.getAttribute('popupOpen');
      popupOpen(target);
    });
  });
  document.querySelectorAll('[popupClose_JS]').forEach(function (e) {
    e.addEventListener('click', function (e) {
      popupClose();
    });
  });
  function popupClose() {
    document.querySelectorAll('.popup.open input').forEach(function (input) {
      input.value = '';
    });
    document.querySelectorAll('.popup.open textarea').forEach(function (textarea) {
      textarea.value = '';
    });
    document.querySelector('html').removeAttribute('style');
    if (document.querySelector('.popup.open')) {
      document.querySelector('.popup.open').classList.remove('open');
    }
  }
  ;
  function popupOpen(e) {
    popupClose();
    var target = e;
    var width = document.body.clientWidth;
    document.querySelector('html').style.cssText = 'overflow: hidden;';
    document.querySelector('[popupID="' + target + '"]').classList.add('open');
  }
  ;
  var passwordField = document.getElementById('password');
  var toggleButton = document.getElementById('toggleVisibility');

  // Функция для обновления отображения пароля
  function updatePasswordMask() {
    var value = passwordField.value;
    var maskedValue = value.split('').map(function (_char, index) {
      if (index > 0 && index < value.length - 1) {
        return '•';
      }
      return _char;
    }).join('');
    passwordField.setAttribute('data-masked', maskedValue);
  }
  if (passwordField) {
    // Инициализация маски для пароля
    var im = new Inputmask({
      mask: '*{1,20}',
      // Маска для пароля (до 20 символов)
      placeholder: '',
      // Плейсхолдер
      showMaskOnHover: false,
      // Не показывать маску при наведении
      showMaskOnFocus: false // Не показывать маску при фокусе
    });
    im.mask(passwordField);

    // Обновление маски при вводе
    passwordField.addEventListener('input', updatePasswordMask);
    // Переключение видимости пароля
    toggleButton.addEventListener('click', function (e) {
      e.preventDefault();
      var type = passwordField.getAttribute('type') === 'password' ? 'text' : 'password';
      passwordField.setAttribute('type', type);
      if (type === 'password') {
        updatePasswordMask();
      } else {
        passwordField.setAttribute('data-masked', passwordField.value);
      }
    });
    // Изначально обновить маску
    updatePasswordMask();
  }
  if (document.querySelector('.form-login')) {
    document.querySelector('.form-login').addEventListener('submit', function (e) {
      e.preventDefault();
      var inputs = Array.from(e.target.querySelectorAll('input'));
      if (inputs.some(function (input) {
        return !input.value;
      })) {
        inputs.filter(function (input) {
          return !input.value;
        }).forEach(function (item) {
          item.style.borderColor = '#e30513';
          setTimeout(function () {
            inputs.forEach(function (input) {
              input.removeAttribute('style');
            });
          }, 1000);
        });
        return;
      } else {
        location.href = 'cabinet.html';
      }
    });
  }
  document.querySelectorAll('select').forEach(function (select) {
    new Choices(select, {
      searchEnabled: false,
      itemSelectText: '',
      position: 'bottom',
      removeItemButton: false,
      shouldSort: false
    });
  });
  function scrollStart() {
    var tableContainer = document.querySelector('.table-wrap');
    if (tableContainer) {
      // Устанавливаем горизонтальную прокрутку в начальное положение
      tableContainer.scrollLeft = tableContainer.scrollWidth;
    }
  }
  scrollStart();
  if (document.querySelector('.section-main__container')) {
    var content = document.querySelector('.section-main__container').innerHTML;
    var changeLayout = "<div class=\"section-main__imges\">\n    <div class=\"section-main__img-wrap\">\n      <img src=\"img/grafic.webp\" alt=\"\" class=\"section-main__img\">\n    </div>\n    <div class=\"section-main__img-wrap\">\n      <img src=\"img/table.webp\" alt=\"\" class=\"section-main__img\">\n    </div>\n  </div>\n  <div class=\"table-wrap\">\n    <table>\n      <thead>\n          <tr>\n              <th>\u2116</th>\n              <th>\u0420\u0435\u0433\u0438\u043E\u043D</th>\n              <th>\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0430\u043F\u0442\u0435\u043A\u0438</th>\n              <th>\u0410\u0434\u0440\u0435\u0441 \u0430\u043F\u0442\u0435\u043A\u0438</th>\n              <th>\u0414\u0430\u0442\u0430 \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0439 \u0444\u043E\u0442\u043E\u0433\u0440\u0430\u0444\u0438\u0438</th>\n              <th>\u041E\u0431\u0449\u0435\u0435 \u043A\u043E\u043B-\u0432\u043E \u0444\u043E\u0442\u043E\u0433\u0440\u0430\u0444\u0438\u0439</th>\n          </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td>1</td>\n          <td>\u0412\u043E\u043B\u043E\u0433\u043E\u0434\u0441\u043A\u0430\u044F \u043E\u0431\u043B\u0430\u0441\u0442\u044C</td>\n          <td><button class=\"table-btn\" popupOpen=\"apteka\">\u0410\u043F\u0442\u0435\u043A\u0430 1</button></td>\n          <td>\u041B\u043E\u043C\u043E\u043D\u043E\u0441\u043E\u0432\u0430 30</td>\n          <td>5/25/2025</td>\n          <td>45</td>\n        </tr>\n        </tbody>\n        </table>\n        </div>";
    var searchInput = document.querySelector('.form-input_search');
    var searchForm = document.querySelector('.search-form');
    if (searchForm && searchInput) {
      searchInput.addEventListener('input', function () {
        if (searchInput.value) {
          document.querySelector('.search-form__clean-btn').classList.add('show');
        } else {
          document.querySelector('.search-form__clean-btn').classList.remove('show');
        }
      });
      document.querySelector('.search-form__clean-btn').addEventListener('click', function (e) {
        searchInput.value = '';
        e.target.classList.remove('show');
        searchInput.focus();
        // document.querySelector('.section-main__container').innerHTML = content;
      });
    }
    searchForm.addEventListener('submit', function (e) {
      e.preventDefault();
      if (!searchInput.value) {
        document.querySelector('.section-main__container').innerHTML = content;
        scrollStart();
        return;
      } else {
        document.querySelector('.section-main__container').innerHTML = changeLayout;
        scrollStart();
        document.querySelectorAll('[popupOpen]').forEach(function (e) {
          e.addEventListener('click', function (e) {
            popupClose();
            var target = e.target.getAttribute('popupOpen');
            popupOpen(target);
          });
        });
      }
    });
  }
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJuYW1lcyI6WyJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImUiLCJwb3B1cENsb3NlIiwidGFyZ2V0IiwiZ2V0QXR0cmlidXRlIiwicG9wdXBPcGVuIiwiaW5wdXQiLCJ2YWx1ZSIsInRleHRhcmVhIiwicXVlcnlTZWxlY3RvciIsInJlbW92ZUF0dHJpYnV0ZSIsImNsYXNzTGlzdCIsInJlbW92ZSIsIndpZHRoIiwiYm9keSIsImNsaWVudFdpZHRoIiwic3R5bGUiLCJjc3NUZXh0IiwiYWRkIiwicGFzc3dvcmRGaWVsZCIsImdldEVsZW1lbnRCeUlkIiwidG9nZ2xlQnV0dG9uIiwidXBkYXRlUGFzc3dvcmRNYXNrIiwibWFza2VkVmFsdWUiLCJzcGxpdCIsIm1hcCIsImNoYXIiLCJpbmRleCIsImxlbmd0aCIsImpvaW4iLCJzZXRBdHRyaWJ1dGUiLCJpbSIsIklucHV0bWFzayIsIm1hc2siLCJwbGFjZWhvbGRlciIsInNob3dNYXNrT25Ib3ZlciIsInNob3dNYXNrT25Gb2N1cyIsInByZXZlbnREZWZhdWx0IiwidHlwZSIsImlucHV0cyIsIkFycmF5IiwiZnJvbSIsInNvbWUiLCJmaWx0ZXIiLCJpdGVtIiwiYm9yZGVyQ29sb3IiLCJzZXRUaW1lb3V0IiwibG9jYXRpb24iLCJocmVmIiwic2VsZWN0IiwiQ2hvaWNlcyIsInNlYXJjaEVuYWJsZWQiLCJpdGVtU2VsZWN0VGV4dCIsInBvc2l0aW9uIiwicmVtb3ZlSXRlbUJ1dHRvbiIsInNob3VsZFNvcnQiLCJzY3JvbGxTdGFydCIsInRhYmxlQ29udGFpbmVyIiwic2Nyb2xsTGVmdCIsInNjcm9sbFdpZHRoIiwiY29udGVudCIsImlubmVySFRNTCIsImNoYW5nZUxheW91dCIsInNlYXJjaElucHV0Iiwic2VhcmNoRm9ybSIsImZvY3VzIl0sInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbcG9wdXBPcGVuXScpLmZvckVhY2goKGUpID0+IHtcbiAgICBlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIHBvcHVwQ2xvc2UoKTtcbiAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ3BvcHVwT3BlbicpO1xuICAgICAgcG9wdXBPcGVuKHRhcmdldCk7XG4gICAgfSk7XG4gIH0pO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbcG9wdXBDbG9zZV9KU10nKS5mb3JFYWNoKChlKSA9PiB7XG4gICAgZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBwb3B1cENsb3NlKCk7XG4gICAgfSk7XG4gIH0pO1xuICBmdW5jdGlvbiBwb3B1cENsb3NlICgpIHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXAub3BlbiBpbnB1dCcpLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC52YWx1ZSA9ICcnO1xuICAgIH0pO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cC5vcGVuIHRleHRhcmVhJykuZm9yRWFjaCgodGV4dGFyZWEpID0+IHtcbiAgICAgIHRleHRhcmVhLnZhbHVlID0gJyc7XG4gICAgfSk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaHRtbCcpLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAub3BlbicpKSB7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAub3BlbicpLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gcG9wdXBPcGVuIChlKSB7XG4gICAgcG9wdXBDbG9zZSgpO1xuICAgIHZhciB0YXJnZXQgPSBlO1xuICAgIHZhciB3aWR0aCA9IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGg7XG5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJykuc3R5bGUuY3NzVGV4dCA9ICdvdmVyZmxvdzogaGlkZGVuOyc7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW3BvcHVwSUQ9XCInICsgdGFyZ2V0ICsgJ1wiXScpLmNsYXNzTGlzdC5hZGQoJ29wZW4nKTtcbiAgfTtcblxuXG5cbiAgdmFyIHBhc3N3b3JkRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmQnKTtcbiAgdmFyIHRvZ2dsZUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2dnbGVWaXNpYmlsaXR5Jyk7XG5cbiAgLy8g0KTRg9C90LrRhtC40Y8g0LTQu9GPINC+0LHQvdC+0LLQu9C10L3QuNGPINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0L/QsNGA0L7Qu9GPXG4gIGZ1bmN0aW9uIHVwZGF0ZVBhc3N3b3JkTWFzaygpIHtcbiAgICAgIHZhciB2YWx1ZSA9IHBhc3N3b3JkRmllbGQudmFsdWU7XG4gICAgICB2YXIgbWFza2VkVmFsdWUgPSB2YWx1ZS5zcGxpdCgnJykubWFwKChjaGFyLCBpbmRleCkgPT4ge1xuICAgICAgICAgIGlmIChpbmRleCA+IDAgJiYgaW5kZXggPCB2YWx1ZS5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgIHJldHVybiAn4oCiJztcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGNoYXI7XG4gICAgICB9KS5qb2luKCcnKTtcbiAgICAgIHBhc3N3b3JkRmllbGQuc2V0QXR0cmlidXRlKCdkYXRhLW1hc2tlZCcsIG1hc2tlZFZhbHVlKTtcbiAgfVxuICBpZihwYXNzd29yZEZpZWxkKSB7XG4gIC8vINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC80LDRgdC60Lgg0LTQu9GPINC/0LDRgNC+0LvRj1xuICAgIHZhciBpbSA9IG5ldyBJbnB1dG1hc2soe1xuICAgICAgbWFzazogJyp7MSwyMH0nLCAvLyDQnNCw0YHQutCwINC00LvRjyDQv9Cw0YDQvtC70Y8gKNC00L4gMjAg0YHQuNC80LLQvtC70L7QsilcbiAgICAgIHBsYWNlaG9sZGVyOiAnJywgLy8g0J/Qu9C10LnRgdGF0L7Qu9C00LXRgFxuICAgICAgc2hvd01hc2tPbkhvdmVyOiBmYWxzZSwgLy8g0J3QtSDQv9C+0LrQsNC30YvQstCw0YLRjCDQvNCw0YHQutGDINC/0YDQuCDQvdCw0LLQtdC00LXQvdC40LhcbiAgICAgIHNob3dNYXNrT25Gb2N1czogZmFsc2UgLy8g0J3QtSDQv9C+0LrQsNC30YvQstCw0YLRjCDQvNCw0YHQutGDINC/0YDQuCDRhNC+0LrRg9GB0LVcbiAgICB9KTtcbiAgICBpbS5tYXNrKHBhc3N3b3JkRmllbGQpO1xuXG4gICAgLy8g0J7QsdC90L7QstC70LXQvdC40LUg0LzQsNGB0LrQuCDQv9GA0Lgg0LLQstC+0LTQtVxuICAgIHBhc3N3b3JkRmllbGQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB1cGRhdGVQYXNzd29yZE1hc2spO1xuICAgIC8vINCf0LXRgNC10LrQu9GO0YfQtdC90LjQtSDQstC40LTQuNC80L7RgdGC0Lgg0L/QsNGA0L7Qu9GPXG4gICAgdG9nZ2xlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHZhciB0eXBlID0gcGFzc3dvcmRGaWVsZC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSA9PT0gJ3Bhc3N3b3JkJyA/ICd0ZXh0JyA6ICdwYXNzd29yZCc7XG4gICAgICBwYXNzd29yZEZpZWxkLnNldEF0dHJpYnV0ZSgndHlwZScsIHR5cGUpO1xuICAgICAgaWYgKHR5cGUgPT09ICdwYXNzd29yZCcpIHtcbiAgICAgICAgICB1cGRhdGVQYXNzd29yZE1hc2soKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGFzc3dvcmRGaWVsZC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWFza2VkJywgcGFzc3dvcmRGaWVsZC52YWx1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgLy8g0JjQt9C90LDRh9Cw0LvRjNC90L4g0L7QsdC90L7QstC40YLRjCDQvNCw0YHQutGDXG4gICAgdXBkYXRlUGFzc3dvcmRNYXNrKCk7XG4gIH1cbiAgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm0tbG9naW4nKSkge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLWxvZ2luJykuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGxldCBpbnB1dHMgPSBBcnJheS5mcm9tKGUudGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0JykpO1xuICAgICAgaWYoaW5wdXRzLnNvbWUoKGlucHV0ID0+ICFpbnB1dC52YWx1ZSkpKSB7XG4gICAgICAgIGlucHV0cy5maWx0ZXIoaW5wdXQgPT4gIWlucHV0LnZhbHVlKS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgaXRlbS5zdHlsZS5ib3JkZXJDb2xvciA9ICcjZTMwNTEzJztcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgICAgICAgICAgaW5wdXQucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvY2F0aW9uLmhyZWYgPSAnY2FiaW5ldC5odG1sJztcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG5cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc2VsZWN0JykuZm9yRWFjaCgoc2VsZWN0KSA9PiB7XG4gICAgbmV3IENob2ljZXMoc2VsZWN0LCB7XG4gICAgICBzZWFyY2hFbmFibGVkOiBmYWxzZSxcbiAgICAgIGl0ZW1TZWxlY3RUZXh0OiAnJyxcbiAgICAgIHBvc2l0aW9uOiAnYm90dG9tJyxcbiAgICAgIHJlbW92ZUl0ZW1CdXR0b246IGZhbHNlLFxuICAgICAgc2hvdWxkU29ydDogZmFsc2UsXG4gICAgfSk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIHNjcm9sbFN0YXJ0KCkge1xuICAgIHZhciB0YWJsZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YWJsZS13cmFwJyk7XG4gICAgaWYodGFibGVDb250YWluZXIpIHtcbiAgICAgICAvLyDQo9GB0YLQsNC90LDQstC70LjQstCw0LXQvCDQs9C+0YDQuNC30L7QvdGC0LDQu9GM0L3Rg9GOINC/0YDQvtC60YDRg9GC0LrRgyDQsiDQvdCw0YfQsNC70YzQvdC+0LUg0L/QvtC70L7QttC10L3QuNC1XG4gICAgICAgdGFibGVDb250YWluZXIuc2Nyb2xsTGVmdCA9IHRhYmxlQ29udGFpbmVyLnNjcm9sbFdpZHRoO1xuICAgIH1cbiAgfVxuICBzY3JvbGxTdGFydCgpO1xuXG5cbiAgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlY3Rpb24tbWFpbl9fY29udGFpbmVyJykpIHtcbiAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlY3Rpb24tbWFpbl9fY29udGFpbmVyJykuaW5uZXJIVE1MO1xuICAgIGNvbnN0IGNoYW5nZUxheW91dCA9IGA8ZGl2IGNsYXNzPVwic2VjdGlvbi1tYWluX19pbWdlc1wiPlxuICAgIDxkaXYgY2xhc3M9XCJzZWN0aW9uLW1haW5fX2ltZy13cmFwXCI+XG4gICAgICA8aW1nIHNyYz1cImltZy9ncmFmaWMud2VicFwiIGFsdD1cIlwiIGNsYXNzPVwic2VjdGlvbi1tYWluX19pbWdcIj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwic2VjdGlvbi1tYWluX19pbWctd3JhcFwiPlxuICAgICAgPGltZyBzcmM9XCJpbWcvdGFibGUud2VicFwiIGFsdD1cIlwiIGNsYXNzPVwic2VjdGlvbi1tYWluX19pbWdcIj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG4gIDxkaXYgY2xhc3M9XCJ0YWJsZS13cmFwXCI+XG4gICAgPHRhYmxlPlxuICAgICAgPHRoZWFkPlxuICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgPHRoPuKEljwvdGg+XG4gICAgICAgICAgICAgIDx0aD7QoNC10LPQuNC+0L08L3RoPlxuICAgICAgICAgICAgICA8dGg+0J3QsNC30LLQsNC90LjQtSDQsNC/0YLQtdC60Lg8L3RoPlxuICAgICAgICAgICAgICA8dGg+0JDQtNGA0LXRgSDQsNC/0YLQtdC60Lg8L3RoPlxuICAgICAgICAgICAgICA8dGg+0JTQsNGC0LAg0L/QvtGB0LvQtdC00L3QtdC5INGE0L7RgtC+0LPRgNCw0YTQuNC4PC90aD5cbiAgICAgICAgICAgICAgPHRoPtCe0LHRidC10LUg0LrQvtC7LdCy0L4g0YTQvtGC0L7Qs9GA0LDRhNC40Lk8L3RoPlxuICAgICAgICAgIDwvdHI+XG4gICAgICA8L3RoZWFkPlxuICAgICAgPHRib2R5PlxuICAgICAgICA8dHI+XG4gICAgICAgICAgPHRkPjE8L3RkPlxuICAgICAgICAgIDx0ZD7QktC+0LvQvtCz0L7QtNGB0LrQsNGPINC+0LHQu9Cw0YHRgtGMPC90ZD5cbiAgICAgICAgICA8dGQ+PGJ1dHRvbiBjbGFzcz1cInRhYmxlLWJ0blwiIHBvcHVwT3Blbj1cImFwdGVrYVwiPtCQ0L/RgtC10LrQsCAxPC9idXR0b24+PC90ZD5cbiAgICAgICAgICA8dGQ+0JvQvtC80L7QvdC+0YHQvtCy0LAgMzA8L3RkPlxuICAgICAgICAgIDx0ZD41LzI1LzIwMjU8L3RkPlxuICAgICAgICAgIDx0ZD40NTwvdGQ+XG4gICAgICAgIDwvdHI+XG4gICAgICAgIDwvdGJvZHk+XG4gICAgICAgIDwvdGFibGU+XG4gICAgICAgIDwvZGl2PmA7XG4gICAgY29uc3Qgc2VhcmNoSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybS1pbnB1dF9zZWFyY2gnKTtcbiAgICBjb25zdCBzZWFyY2hGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaC1mb3JtJyk7XG4gICAgaWYoc2VhcmNoRm9ybSAmJiBzZWFyY2hJbnB1dCkge1xuICAgICAgc2VhcmNoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgIGlmKHNlYXJjaElucHV0LnZhbHVlKSB7XG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaC1mb3JtX19jbGVhbi1idG4nKS5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaC1mb3JtX19jbGVhbi1idG4nKS5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaC1mb3JtX19jbGVhbi1idG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIHNlYXJjaElucHV0LnZhbHVlID0gJyc7XG4gICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICAgICAgc2VhcmNoSW5wdXQuZm9jdXMoKTtcbiAgICAgICAgLy8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlY3Rpb24tbWFpbl9fY29udGFpbmVyJykuaW5uZXJIVE1MID0gY29udGVudDtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBzZWFyY2hGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZighc2VhcmNoSW5wdXQudmFsdWUpIHtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlY3Rpb24tbWFpbl9fY29udGFpbmVyJykuaW5uZXJIVE1MID0gY29udGVudDtcbiAgICAgICAgc2Nyb2xsU3RhcnQoKVxuICAgICAgICByZXR1cm47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VjdGlvbi1tYWluX19jb250YWluZXInKS5pbm5lckhUTUwgPSBjaGFuZ2VMYXlvdXQ7XG4gICAgICAgIHNjcm9sbFN0YXJ0KClcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW3BvcHVwT3Blbl0nKS5mb3JFYWNoKChlKSA9PiB7XG4gICAgICAgICAgZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBwb3B1cENsb3NlKCk7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdwb3B1cE9wZW4nKTtcbiAgICAgICAgICAgIHBvcHVwT3Blbih0YXJnZXQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSk7XG5cblxuIl0sIm1hcHBpbmdzIjoiOztBQUFBQSxRQUFRLENBQUNDLGdCQUFnQixDQUFDLGtCQUFrQixFQUFFLFlBQVc7RUFDdkRELFFBQVEsQ0FBQ0UsZ0JBQWdCLENBQUMsYUFBYSxDQUFDLENBQUNDLE9BQU8sQ0FBQyxVQUFDQyxDQUFDLEVBQUs7SUFDdERBLENBQUMsQ0FBQ0gsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFVBQUNHLENBQUMsRUFBSztNQUNqQ0MsVUFBVSxDQUFDLENBQUM7TUFDWixJQUFJQyxNQUFNLEdBQUdGLENBQUMsQ0FBQ0UsTUFBTSxDQUFDQyxZQUFZLENBQUMsV0FBVyxDQUFDO01BQy9DQyxTQUFTLENBQUNGLE1BQU0sQ0FBQztJQUNuQixDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFDRk4sUUFBUSxDQUFDRSxnQkFBZ0IsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDQyxPQUFPLENBQUMsVUFBQ0MsQ0FBQyxFQUFLO0lB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LENBQUMsT0FBTyxFQUFFLFlBQU07UUFDMUMsSUFBR2lFLFdBQVcsQ0FBQ3hELEtBQUssRUFBRTtVQUNwQlYsUUFBUSxDQUFDWSxhQUFhLENBQUMseUJBQXlCLENBQUMsQ0FBQ0UsU0FBUyxDQUFDTyxHQUFHLENBQUMsTUFBTSxDQUFDO1FBQ3pFLENBQUMsTUFBTTtVQUNMckIsUUFBUSxDQUFDWSxhQUFhLENBQUMseUJBQXlCLENBQUMsQ0FBQ0UsU0FBUyxDQUFDQyxNQUFNLENBQUMsTUFBTSxDQUFDO1FBQzVFO01BQ0YsQ0FBQyxDQUFDO01BQ0ZmLFFBQVEsQ0FBQ1ksYUFBYSxDQUFDLHlCQUF5QixDQUFDLENBQUNYLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxVQUFDRyxDQUFDLEVBQUs7UUFDakY4RCxXQUFXLENBQUN4RCxLQUFLLEdBQUcsRUFBRTtRQUN0Qk4sQ0FBQyxDQUFDRSxNQUFNLENBQUNRLFNBQVMsQ0FBQ0MsTUFBTSxDQUFDLE1BQU0sQ0FBQztRQUNqQ21ELFdBQVcsQ0FBQ0UsS0FBSyxDQUFDLENBQUM7UUFDbkI7TUFDRixDQUFDLENBQUM7SUFDSjtJQUNBRCxVQUFVLENBQUNsRSxnQkFBZ0IsQ0FBQyxRQUFRLEVBQUUsVUFBQ0csQ0FBQyxFQUFLO01BQzNDQSxDQUFDLENBQUNvQyxjQUFjLENBQUMsQ0FBQztNQUNsQixJQUFHLENBQUMwQixXQUFXLENBQUN4RCxLQUFLLEVBQUU7UUFDckJWLFFBQVEsQ0FBQ1ksYUFBYSxDQUFDLDBCQUEwQixDQUFDLENBQUNvRCxTQUFTLEdBQUdELE9BQU87UUFDdEVKLFdBQVcsQ0FBQyxDQUFDO1FBQ2I7TUFDRixDQUFDLE1BQU07UUFDTDNELFFBQVEsQ0FBQ1ksYUFBYSxDQUFDLDBCQUEwQixDQUFDLENBQUNvRCxTQUFTLEdBQUdDLFlBQVk7UUFDM0VOLFdBQVcsQ0FBQyxDQUFDO1FBQ2IzRCxRQUFRLENBQUNFLGdCQUFnQixDQUFDLGFBQWEsQ0FBQyxDQUFDQyxPQUFPLENBQUMsVUFBQ0MsQ0FBQyxFQUFLO1VBQ3REQSxDQUFDLENBQUNILGdCQUFnQixDQUFDLE9BQU8sRUFBRSxVQUFDRyxDQUFDLEVBQUs7WUFDakNDLFVBQVUsQ0FBQyxDQUFDO1lBQ1osSUFBSUMsTUFBTSxHQUFHRixDQUFDLENBQUNFLE1BQU0sQ0FBQ0MsWUFBWSxDQUFDLFdBQVcsQ0FBQztZQUMvQ0MsU0FBUyxDQUFDRixNQUFNLENBQUM7VUFDbkIsQ0FBQyxDQUFDO1FBQ0osQ0FBQyxDQUFDO01BQ0o7SUFDRixDQUFDLENBQUM7RUFDSjtBQUNGLENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==
